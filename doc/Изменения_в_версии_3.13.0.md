Навигация: [Главная страница](Main_Page "wikilink")/[Система
ejudge](Система_ejudge "wikilink")/[Разработка](Разработка "wikilink")/[История
версий](История_версий "wikilink")/[Изменения в версии
3.13.0](Изменения_в_версии_3.13.0 "wikilink")

Время выхода: 25 декабря 2024 г.

[Предыдущая версия](Изменения_в_версии_3.12.0 "wikilink")

### Обновление с предыдущих версий

После инсталляции новой версии ejudge обязательно выполните команды
`ejudge-suid-setup` и `ejudge-upgrade-web` из-под пользователя root и
команду `ejudge-configure-compilers` из-под пользователя ejudge.

### Список Pull Requests

[Список изменений на
GitHub](https://github.com/blackav/ejudge/milestone/6?closed=1)

### Главные новые возможности и улучшения

- Добавлена поддержка [режима слияния подгрупп (правила
  IOI)](Правила_IOI_расчета_баллов "wikilink").
- Добавлен универсальный плагин для [аутентификации по
  OIDC](Аутентификация_с_помощью_OAUTH2 "wikilink").
- Переработан механизм [взаимодействия сервера турнира и агентов
  компиляции](Улучшенная_поддержка_серверов_компиляции "wikilink").
- Улучшена поддержка [задач на неполные
  программы](Задачи_на_неполные_программы "wikilink").
- В HTML-условиях поддерживается MathJax3.
- Добавлен плагин для отправки нотификаций в redis streams.
- Обновлена программа [ej-polygon](ej-polygon "wikilink") импорта задач
  из системы Polygon.

### [ej-compile](ej-compile "wikilink")

Поддерживается аргумент командной строки `-y`, в котором передаётся
серийный номер параллельного запуска программы на одном хосте. Этот
параметр используется при запуске процесса компиляции в контейнере,
чтобы использовать отдельный идентификатор пользователя компиляции.
Параллельные компиляции на одном хосте будут выполняться под разными
идентификаторами пользователя и не будут влиять друг на друга.

Поддерживаются расширенные свойства скомпилированных файлов. Они
активируются с помощью установки глобального конфигурационного параметра
[`enable_run_props`](Serve.cfg:global:enable_run_props "wikilink")
турнира. В этом случае в скрипт компиляции передается третий параметр —
путь к файлу, в который скрипт компиляции может записать дополнительные
свойства сгенерированного исполняемого файла. Этот файл передается в
сервис запуска решений.

При копировании файлов из каталога, заданного с помощью
конфигурационного параметра
[`extra_src_dir`](serve.cfg:problem:extra_src_dir "wikilink"), в рабочий
каталог компиляции выполняется рекурсивное копирование.

Для [Typescript](Lang:tsnode "wikilink") поддерживается альтернативный
транслятор tsx.

В ejudge.xml поддерживается возможность не запускать инстансы ej-compile
и ej-super-run (
[parallelism](ejudge.xml:host_options:host:option "wikilink") и
[compile_parallelism](ejudge.xml:host_options:host:option "wikilink")
могут быть равны 0).

### [ej-compile-control](ej-compile-control "wikilink")

Поддерживается аргумент командной строки `-y`, который передаётся в
[ej-compile](ej-compile "wikilink").

### [ej-contests](ej-contests "wikilink")

В конфигурационном параметре
[open_tests](Serve.cfg:problem:open_tests "wikilink") поддерживатся
видимость тестов `icpc`. Если для группы тестов установлена видимость
`icpc`, то участнику турнира отображается только балл и минимальная
информация о первом непрошедшем тесте в группе.

Если у задачи была хотя бы одна группа тестов с видимостью icpc,
протокол тестирования для участника показывает только информацию об
открытых тестах и суммарную информацию по группам тестов.

Добавлена конфигурационная переменная задачи
[`standard_valuer`](Serve.cfg:problem:standard_valuer "wikilink"),
которая позволяет задать стандартную программу оценивания
[gvaluer](gvaluer "wikilink") и не копировать её каждый раз в каталог
турнира.

Поддерживается экспорт архивов посылок в фоновом режиме. После нажатия
"Download archive of runs" и выбора опций скачивания решений создаётся
фоновое задание, статус исполнения которого можно отслеживать. Когда
подготовка архива будет закончена, архив можно будет скачать по ссылке.

Добавлена поддержка привилегированного API-вызова
[`get-user`](API:priv:get-user "wikilink").

Добавлена поддержка привилегированного API-вызова
[`copy-user-info`](API:priv:copy-user-info "wikilink").

Добавлена поддержка привилегированного API-вызова
[`change-registration`](API:priv:change-registration "wikilink").

Добавлена поддержка привилегированного API-вызова
[`problem-status-json`](API:priv:problem-status-json "wikilink").

Добавлена поддержка привилегированного API-вызова
[`list-languages`](API:priv:list-languages "wikilink").

Добавлена поддержка привилегированного API-вызова
[`create-user-session`](API:priv:create-user-session "wikilink").

Добавлена поддержка привилегированного API-вызова
[`change-registrations`](API:priv:change-registrations "wikilink").

Добавлена поддержка API-вызова
[`special-flow`](API:priv:special-flow "wikilink").

В протоколах тестирования отображается размер использованной памяти
(RSS). Это поддерживается только в случае запуска решений в контейнере.

Добавлен глобальный конфигурационный параметр
[`enable_run_props`](Serve.cfg:global:enable_run_props "wikilink").

Исправлена ошибка, из-за которой не работала смена языка интерфейса.

Если apache не может подключиться к ej-contests, клиенту возвращается
http status 500.

Добавлены атрибуты
[`enable_user_finish`](contest.xml:enable_user_finish "wikilink"),
[`disable_user_finish`](contest.xml:disable_user_finish "wikilink"),
которые модифицируют возможность пользовательского завершения турнира.

Добавлен конфигурационный параметр
[`default_disabled`](Serve.cfg:language:default_disabled "wikilink")
языков программирования.

Добавлен конфигурационный параметр
[`version`](Serve.cfg:language:version "wikilink") языков
программирования.

Добавлен конфигурационный параметр
[`disable_auto_update`](Serve.cfg:language:disable_auto_update "wikilink")
языков программирования.

Добавлен глобальный конфигурационный параметр
[`enable_language_import`](Serve.cfg:global:enable_language_import "wikilink").

Добавлен глобальный конфигурационный параметр
[`language_import`](Serve.cfg:global:language_import "wikilink").

Пользователь может завершить невиртуальный турнир в любой момент
времени.

Добавлен конфигурационный параметр
[`enable_group_merge`](Serve.cfg:problem:enable_group_merge "wikilink")
задач.

Добавлен конфигурационный параметр
[`run_max_file_size`](Serve.cfg:language:run_max_file_size "wikilink")
языков программирования.

Добавлен глобальный конфигурационный параметр
[`disable_bson_store`](Serve.cfg:global:disable_bson_store "wikilink").

### [ej-polygon](ej-polygon "wikilink")

При импорте из полигона поддерживаются баллы за тесты и группы тестов,
которые хранятся в элементах `tests` и `group`.

Поддерживается генерация параметров
[test_score_list](serve.cfg:problem:test_score_list "wikilink"),
[open_tests](serve.cfg:problem:open_tests "wikilink"),
[final_open_tests](serve.cfg:problem:final_open_tests "wikilink").

Поддерживается генерация файла valuer.cfg для оценивающей программы
[gvaluer](gvaluer "wikilink").

При импорте турнира из полигона задачи сортируются по строковому
значению ключа задачи, он же используется для короткого имени задачи.

Добавлена опция enable_rss_limit при импорте из полигона.

### [ej-suid-container](ej-suid-container "wikilink")

Поддерживается переключение в разные непривилегированные пользователи
для параллельной компиляции.

### [ej-super-run](ej-super-run "wikilink")

### [ej-super-server](ej-super-server "wikilink")

Поддерживается заголовок 'Authorization:' для последующей реализации
API-вызовов.

Добавлена поддержка привилегированного API-вызова `login-action-json`.

### [ejudge-control](ejudge-control "wikilink")

Добавлена опция --compile-queue.

### [gvaluer](gvaluer "wikilink")

При компиляции ejudge программа автоматически компилируется и
инсталлируется в каталог с проверяющими программами. Для этого в системе
должен быть установлен компилятор C++.
