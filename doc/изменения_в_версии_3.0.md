Навигация: [Главная страница](main_Page.md)/[Система
ejudge](система_ejudge.md)/[Разработка](разработка.md)/[История
версий](история_версий.md)/[Изменения в версии
3.0](изменения_в_версии_3.0.md)

Время выхода: 28 августа 2014 г.

В данной версии произведена переработка внутренней архитектуры.
Генерация HTML-страниц вынесена в отдельные модули, которые подгружаются
динамически при работе системы. Генерация страниц выполняется по
шаблонам страниц в специальном формате CSP. Формат похож на JSP (java
server pages) и расширен поддержкой специальных тегов, похожих не теги
struts2.

Разработан препроцессор ej-page-gen, который преобразовывает шаблон в
формате CSP в код на языке Си. Далее этот код компилируется в
динамическую библиотеку, готовую к подгрузке в работающую систему.

Поддерживается динамическое обновление шаблонов. Если файл шаблона был
обновлен в процессе работы системы, он будет автоматически
перекомпилирован и заменит собой текущий вариант страницы. Проверка
обновлений страницы происходит один раз в минуту, таким образом
максимальное время от обновления файла шаблона до отображения нового
варианта страницы составляет около одной минуты.

В инсталлированной системе шаблоны страниц располагаются в каталоге
`${prefix}/share/ejudge/csp`. В подкаталоге `contests` находятся шаблоны
интерфейса пользователя и администратора для проведения турнира и
интерфейс пользователя для регистрации (master, judge, client,
register). В подкаталоге `super-server` находятся шаблоны для настройки
турнира (serve-control).

Каталог `${prefix}/share/ejudge/csp` перезаписывается при каждом
обновлении системы. Альтернативное место для файлов шаблонов - каталог
`${contests_home_dir}`. Файлы, находящиеся в этом каталоге, не
перезаписываются при обновлении. Они имеют более высокий приоритет, чем
файлы шаблонов в каталоге инсталляции системы. То есть, если файл
шаблона обнаружен здесь, будет использоваться он, а не файл из каталога
инсталляции системы.

В связи с переходом на новый механизм генерации страниц более не
поддерживается включение файлов в генерируемые HTML-страницы,
управляемое элементами
[`priv_header_file`](contest.xml/priv_header_file.md),
[`priv_footer_file`](contest.xml/priv_footer_file.md),
[`register_header_file`](contest.xml/register_header_file.md),
[`register_footer_file`](contest.xml:register_footer_file.md),
[`register_head_style`](contest.xml/register_head_style.md),
[`register_par_style`](contest.xml/register_par_style.md),
[`register_table_style`](contest.xml/register_table_style.md),
[`team_header_file`](contest.xml/team_header_file.md),
[`team_footer_file`](contest.xml/team_footer_file.md),
[`team_separator_file`](contest.xml/team_separator_file.md),
[`team_menu_1_file`](contest.xml/team_menu_1_file.md),
[`team_menu_2_file`](contest.xml/team_menu_2_file.md),
[`team_menu_3_file`](contest.xml/team_menu_3_file.md),
[`team_head_style`](contest.xml/team_head_style.md),
[`team_par_style`](contest.xml/team_par_style.md).

Дополнительно к исходным кодам распространяются бинарные сборки в
формате RPM для дистрибутива Fedora 20.
