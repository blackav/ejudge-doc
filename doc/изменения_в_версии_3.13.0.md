Навигация: [Главная страница](main_Page.md)/[Система ejudge](система_ejudge.md)/[Разработка](разработка.md)/[История версий](история_версий.md)/[Изменения в версии 3.13.0](изменения_в_версии_3.13.0.md)

Время выхода: 25 декабря 2024 г.

[Предыдущая версия](изменения_в_версии_3.12.0.md) [Следующая версия](изменения_в_версии_3.14.0.md)

### Обновление с предыдущих версий

После инсталляции новой версии ejudge обязательно выполните команды
`ejudge-suid-setup` и `ejudge-upgrade-web` из-под пользователя root и
команду `ejudge-configure-compilers` из-под пользователя ejudge.

### Список Pull Requests

[Список изменений на GitHub](https://github.com/blackav/ejudge/milestone/6?closed=1)

### Главные новые возможности и улучшения

- Добавлена поддержка [режима слияния подгрупп (правила IOI)](правила_IOI_расчета_баллов.md).
- Добавлен универсальный плагин для [аутентификации по OIDC](аутентификация_с_помощью_OAUTH2.md).
- Переработан механизм [взаимодействия сервера турнира и агентов компиляции](улучшенная_поддержка_серверов_компиляции.md).
- Улучшена поддержка [задач на неполные программы](задачи_на_неполные_программы.md).
- В HTML-условиях поддерживается MathJax3.
- Добавлен плагин для отправки нотификаций в redis streams.
- Обновлена программа [ej-polygon](ej-polygon.md) импорта задач из системы Polygon.

### [ej-compile](ej-compile.md)

Поддерживается аргумент командной строки `-y`, в котором передаётся
серийный номер параллельного запуска программы на одном хосте. Этот
параметр используется при запуске процесса компиляции в контейнере,
чтобы использовать отдельный идентификатор пользователя компиляции.
Параллельные компиляции на одном хосте будут выполняться под разными
идентификаторами пользователя и не будут влиять друг на друга.

Поддерживаются расширенные свойства скомпилированных файлов. Они
активируются с помощью установки глобального конфигурационного параметра
[`enable_run_props`](serve.cfg/global/enable_run_props.md)
турнира. В этом случае в скрипт компиляции передается третий параметр —
путь к файлу, в который скрипт компиляции может записать дополнительные
свойства сгенерированного исполняемого файла. Этот файл передается в
сервис запуска решений.

При копировании файлов из каталога, заданного с помощью
конфигурационного параметра
[`extra_src_dir`](serve.cfg/problem/extra_src_dir.md), в рабочий
каталог компиляции выполняется рекурсивное копирование.

Для [Typescript](lang/tsnode.md) поддерживается альтернативный
транслятор tsx.

В ejudge.xml поддерживается возможность не запускать инстансы ej-compile
и ej-super-run (
[parallelism](ejudge.xml:host_options:host:option.md) и
[compile_parallelism](ejudge.xml:host_options:host:option.md)
могут быть равны 0).

### [ej-compile-control](ej-compile-control.md)

Поддерживается аргумент командной строки `-y`, который передаётся в
[ej-compile](ej-compile.md).

### [ej-contests](ej-contests.md)

В конфигурационном параметре
[open_tests](serve.cfg/problem/open_tests.md) поддерживатся
видимость тестов `icpc`. Если для группы тестов установлена видимость
`icpc`, то участнику турнира отображается только балл и минимальная
информация о первом непрошедшем тесте в группе.

Если у задачи была хотя бы одна группа тестов с видимостью icpc,
протокол тестирования для участника показывает только информацию об
открытых тестах и суммарную информацию по группам тестов.

Добавлена конфигурационная переменная задачи
[`standard_valuer`](serve.cfg/problem/standard_valuer.md),
которая позволяет задать стандартную программу оценивания
[gvaluer](gvaluer.md) и не копировать её каждый раз в каталог
турнира.

Поддерживается экспорт архивов посылок в фоновом режиме. После нажатия
"Download archive of runs" и выбора опций скачивания решений создаётся
фоновое задание, статус исполнения которого можно отслеживать. Когда
подготовка архива будет закончена, архив можно будет скачать по ссылке.

Добавлена поддержка привилегированного API-вызова
[`get-user`](api/priv/get-user.md).

Добавлена поддержка привилегированного API-вызова
[`copy-user-info`](api/priv/copy-user-info.md).

Добавлена поддержка привилегированного API-вызова
[`change-registration`](api/priv/change-registration.md).

Добавлена поддержка привилегированного API-вызова
[`problem-status-json`](api/priv/problem-status-json.md).

Добавлена поддержка привилегированного API-вызова
[`list-languages`](api/priv/list-languages.md).

Добавлена поддержка привилегированного API-вызова
[`create-user-session`](api/priv/create-user-session.md).

Добавлена поддержка привилегированного API-вызова
[`change-registrations`](api/priv/change-registrations.md).

Добавлена поддержка API-вызова
[`special-flow`](api/priv/special-flow.md).

В протоколах тестирования отображается размер использованной памяти
(RSS). Это поддерживается только в случае запуска решений в контейнере.

Добавлен глобальный конфигурационный параметр
[`enable_run_props`](serve.cfg/global/enable_run_props.md).

Исправлена ошибка, из-за которой не работала смена языка интерфейса.

Если apache не может подключиться к ej-contests, клиенту возвращается
http status 500.

Добавлены атрибуты
[`enable_user_finish`](contest.xml/enable_user_finish.md),
[`disable_user_finish`](contest.xml/disable_user_finish.md),
которые модифицируют возможность пользовательского завершения турнира.

Добавлен конфигурационный параметр
[`default_disabled`](serve.cfg/language/default_disabled.md)
языков программирования.

Добавлен конфигурационный параметр
[`version`](serve.cfg/language/version.md) языков
программирования.

Добавлен конфигурационный параметр
[`disable_auto_update`](serve.cfg/language/disable_auto_update.md)
языков программирования.

Добавлен глобальный конфигурационный параметр
[`enable_language_import`](serve.cfg/global/enable_language_import.md).

Добавлен глобальный конфигурационный параметр
[`language_import`](serve.cfg/global/language_import.md).

Пользователь может завершить невиртуальный турнир в любой момент
времени.

Добавлен конфигурационный параметр
[`enable_group_merge`](serve.cfg/problem/enable_group_merge.md)
задач.

Добавлен конфигурационный параметр
[`run_max_file_size`](serve.cfg/language/run_max_file_size.md)
языков программирования.

Добавлен глобальный конфигурационный параметр
[`disable_bson_store`](serve.cfg/global/disable_bson_store.md).

### [ej-polygon](ej-polygon.md)

При импорте из полигона поддерживаются баллы за тесты и группы тестов,
которые хранятся в элементах `tests` и `group`.

Поддерживается генерация параметров
[test_score_list](serve.cfg/problem/test_score_list.md),
[open_tests](serve.cfg/problem/open_tests.md),
[final_open_tests](serve.cfg/problem/final_open_tests.md).

Поддерживается генерация файла valuer.cfg для оценивающей программы
[gvaluer](gvaluer.md).

При импорте турнира из полигона задачи сортируются по строковому
значению ключа задачи, он же используется для короткого имени задачи.

Добавлена опция enable_rss_limit при импорте из полигона.

### [ej-suid-container](ej-suid-container.md)

Поддерживается переключение в разные непривилегированные пользователи
для параллельной компиляции.

### [ej-super-run](ej-super-run.md)

### [ej-super-server](ej-super-server.md)

Поддерживается заголовок 'Authorization:' для последующей реализации
API-вызовов.

Добавлена поддержка привилегированного API-вызова `login-action-json`.

### [ejudge-control](ejudge-control.md)

Добавлена опция --compile-queue.

### [gvaluer](gvaluer.md)

При компиляции ejudge программа автоматически компилируется и
инсталлируется в каталог с проверяющими программами. Для этого в системе
должен быть установлен компилятор C++.
