Навигация: [Главная страница](Main_Page "wikilink")/[Система
ejudge](Система_ejudge "wikilink")/[Разработка](Разработка "wikilink")/[История
версий](История_версий "wikilink")/[Изменения в версии
3.7.0](Изменения_в_версии_3.7.0 "wikilink")

Время выхода: 28 сентября 2017 г.

[Предыдущая версия](Изменения_в_версии_3.6.5 "wikilink") [Следующая
версия](Изменения_в_версии_3.7.1 "wikilink")

Добавлена поддержка языка Rust.

### [ejudge.xml](ejudge.xml "wikilink")

Добавлены элементы
[`default_avatar_plugin`](ejudge.xml:default_avatar_plugin "wikilink"),
[`default_content_plugin`](ejudge.xml:default_content_plugin "wikilink"),
[`default_content_url_prefix`](ejudge.xml:default_content_url_prefix "wikilink").

### [ej-contests](ej-contests "wikilink")

Добавлена поддержка [пользовательских
аватаров](Поддержка_аватаров "wikilink"). Аватар представляет собой
растровое изображение размера 90x90 в форматах JPEG, GIF или PNG.
Пользователь может загрузить аватар при регистрации на турнир, аватары
пользователей отображаются на различных страницах административного
интерфейса и на странице текущих результатов.

Аватары пользователей хранятся в базе данных mongo, поддержка которой
должна быть активирована. Дополнительно, аватары могут храниться в
файловой системе, чтобы запросы к аватарам обрабатывались веб-сервером
как статический контент.

Добавлена глобальная конфигурационная переменная
[`stand_show_avatar`](Serve.cfg:global:stand_show_avatar "wikilink") для
отображения аватаров участников в таблице результатов.
[screenshot](Media:Master_standings.png "wikilink")

Добавлена поддержка [шаблонов генерации HTML страниц, специфичных для
турниров](Шаблоны_HTML_для_турниров "wikilink"). Шаблоны
пользовательских страниц могут произвольным образом модифицироваться для
каждого турнира независимо от других турниров.

В административный интерфейс добавлены команды "Reload contest pages"
для принудительной перезагрузки CSP-страниц текущего турнира и "Reload
All contest pages" для принудительной перезагрузки CSP-страниц всех
турниров.

В конфигурационный файл турнира [contest.xml](contest.xml "wikilink")
добавлены атрибуты:
[`enable_avatar`](contest.xml:enable_avatar "wikilink") включает
поддержку аватаров для этого турнира
[`enable_local_pages`](contest.xml:enable_local_pages "wikilink")
включает поддержку турнирных шаблонов генерации HTML страниц

Добавлены элементы
[`avatar_plugin`](contest.xml:avatar_plugin "wikilink"),
[`content_plugin`](contest.xml:content_plugin "wikilink"),
[`content_url_prefix`](contest.xml:content_url_prefix "wikilink"),
которые позволяют настраивать поддержку аватаров в турнире.

Генерация таблиц результатов турнира полностью переделана: таблицы
результатов для всех типов турниров генерируются одной функций, что
позволило устранить дублирующий код; таблицы результатов генерируются с
помощью CSP-шаблонов; поддерживаются таблицы результатов, специфичные
для турниров; в таблице результатов турниров ACM поддерживается
отображение ячеек участников, сдавших задачу первыми, поддерживается
информация о посылках, сданных в период заморозки турнира.

В таблице текущих результатов турнира поддерживается установка
относительного или абсолютного момента времени, для которого
генерируется таблица результатов, поддерживается переключение таблицы
результатов в пользовательский (непривилегированный) режим.

Генерация таблицы посылок (public log) выполняется с помощью
CSP-шаблона.

Переработана таблица пользователей турнира, отображаемая в интерфейсе
администратора. Поддерживается фильтрация по флагам пользователя.

Обновлен внешний вид страниц регистрации пользователя на турнир. Он
теперь совпадает с общим стилем интерфейса.

В выражении фильтра посылок поддерживаются предикаты userprivileged,
userreg_readonly.

Добавлена поддержка дорешивания виртуального турнира (merge request).

Добавлены флаги "include_testing_report", "run_latex", "print_pdfs",
"clear_working_directory" для генерации tex-протоколов участников.
[screenshot](Media:Protocol_generation_1.png "wikilink")

Улучшена поддержка виртуальных турниров KIROV. Добавлена глобальная
конфигурационная переменная
[`virtual_end_options`](Serve.cfg:global:virtual_end_options "wikilink").

### [ej-page-gen](ej-page-gen "wikilink")

Добавлена директива @function для определения вспомогательных функций в
CSP-файле.

У элемента s:param атрибут value является необязательным. Добавлен
атрибут checkExpr.

Добавлена поддержка элементов s:td, s:tr.

У элемента s:submit добавлен атрибут text.

У элемента s:v добавлен атрибут fullCheckExpr.

Добавлен элемент s:indir.

У элемента s:textfield добавлен атрибут fullCheckExpr.

У элемента s:checkbox добавлен атрибуты onchange, nameserial,
nameprefix.

У элемента s:img добавлены атрибуты id, class.

### [ej-super-server](ej-super-server "wikilink")

Добавлена ссылка Logout для выхода из системы.

Обновлен интерфейс страниц редактирования пользователей. Теперь он
соответствует основному интерфейсу системы. Страницы редактирования
пользователей перенесены в CSP-шаблоны.

Страницы загрузки задач и турниров из полигона перенесены в CSP-шаблоны.

### [ej-users](ej-users "wikilink")

Добавлены новые флаги регистрации на турнир: привилегированный
пользователь (privileged) и запрет на модификацию регистрационных данных
(reg. read-only).

В базу данных пользователей добавлены поля avatar_store, avatar_id,
avatar_suffix.

### [ejudge-edit-users](ejudge-edit-users "wikilink")

При редактировании списка пользователей команда 'p' переключает флаг
привилегированной регистрации, команда 'h' переключает флаг запрета
модификации регистрационных данных.
