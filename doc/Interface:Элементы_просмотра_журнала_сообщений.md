Навигация: [Главная страница](Main_Page "wikilink")/[Система
ejudge](Система_ejudge "wikilink")/[Использование](Использование "wikilink")/[Веб-интерфейс
пользователя](Веб-интерфейс_пользователя "wikilink")/[Элементы просмотра
журнала
сообщений](interface:Элементы_просмотра_журнала_сообщений "wikilink")

На рис. 4.9 представлены элементы интерфейса пользователя для просмотра
сообщений, поступающих от участников и ответов судей участникам. Все
интерфейсные элементы подробно описаны далее.

Если глобальная конфигурационная переменная
[`disable_team_clars`](serve.cfg:global:disable_team_clars "wikilink")
установлена в *true*, участники турнира не будут иметь возможность
направлять сообщения судьям. Если глобальная конфигурационная переменная
`disable_clars` установлена в *true*, то и участники турнира не будут
иметь возможность адресовать сообщения судьям, и, наоборот, судьи и
администратор турнира не будет иметь возможность писать сообщения
участникам. В последнем случае элементы просмотра журнала сообщений и
ввода текста нового сообщения не отображаются на страницах
администратора турнира и судей турнира.

1\. Ссылки быстрой навигации подробно описаны выше.

2\. В этой строке показывается общее количество сообщений в базе
сообщений (как от участников судьям так и наоборот) и количество
отображённых сообщений. По умолчанию отображается 15 последних
сообщений, но изменить количество отображаемых сообщений можно с помощью
элементов интерфейса 3, 4 и 5.

3\. В данном поле ввода указывается номер первого сообщения для
просмотра.

4\. В данном поле указывается номер последнего сообщения для просмотра.

5\. При нажатии на кнопку “View” отображаются сообщения в соответствии
со значениями, введёнными в элементах 3 и 4. Пусть в настоящий момент в
базе сообщений находятся *N* сообщений. Сообщения нумеруются от 0 (самое
раннее сообщение) до *N* −1. Пусть в поле “First clar” (3) введено
значение *F*, а в поле “Last clar” (4) введено значение *L*. Сообщения
будут отображены в соответствии со следующими правилами.

- Если значение *F* \< 0, то это число задаёт номер сообщения, считая от
  последнего, то есть *F′ = N +F*, а в противном случае *F′ = F*.
- Если теперь *F′*\< 0, то *F′′* = 0, а если *F′ ≥ N*, то *F′′ = N* −1,
  а в противном случае *F′′ = F′* (проверяется выход за границы
  допустимых изменений номера сообщения).
- Аналогичные вычисления проводятся для *L*. Если *L*\<, то *L′ =N+L*, а
  иначе *L′ =L*.
- Если *L′* \< 0, то *L′′* = 0, а если *L′ ≥ N*, то *L′′ = N* −1, а
  иначе *L′′ = L′*.
- Если *F′′* ≤ *L′′*, то будет отображён список сообщений от сообщения с
  номером *F′′* до сообщения с номером *L′′* в порядке их поступления,
  то есть в порядке увеличения календарного времени их получения
  сервером турнира. Если *F′′* \> *L′′*, то отображается список
  сообщений от сообщения с номером *L′′* до сообщения с номером *F′′* в
  обратном порядке, то есть от сообщений, поступивших позже, к
  сообщениями, поступившим раньше.

Таким образом, чтобы отобразить весь список сообщений, начиная с
последнего и до самого первого, в поле “First clar” достаточно ввести
значение −1, а в поле “Last clar” — значение 0.

6\. Элементы интерфейса 6—14 соответствуют столбцам таблицы сообщений. В
столбце “Clar ID” отображается порядковый номер сообщения, который
изменяется, как сказано выше, от 0 до *N* −1, где *N* — общее число
сообщений в базе.

7\. В столбце “Flags” отображаются флаг состояния сообщения. Флаг
состояния может иметь следующие значения:

- **`N`**. «Новое» сообщение, то есть сообщение, которое ещё не было
  просмотрено судьёй турнира. Судьёй в данном контексте считается
  пользователь, использующий для просмотра сообщений CGI-программу
  `judge`. Флаг сбрасывается, когда текст сообщения открывается с
  помощью нажатия на ссылку “View” (14) в CGI-программе `judge`.
  Просмотры сообщения в CGI-программе `master` не не сбрасывают этот
  флаг.
- **`A`**. «Отвеченное» сообщение, то есть сообщение, которое было
  просмотрено судьёй или администратором турнира с помощью нажатия на
  ссылку “View” (14), и на которое был написан и отослан автору
  сообщения или всем участникам турнира ответ. Флаг `A` устанавливается
  при использовании как CGI-программы `judge`, так и CGI-программы
  `master`.

Если в столбце статуса не отображается ни один из описанных выше
статусов сообщения, значит данное сообщение не является ни новым, ни
отвеченным, то есть оно уже было просмотрено, но ответ на него ещё не
был разослан.

8\. В столбце “Time” отображается время, прошедшее от начала турнира до
момента получения сервером турнира serve этого сообщения. Если в файле
конфигурации турнира [`serve.cfg`](serve.cfg "wikilink") установлена
глобальная конфигурационная переменная
[`show_astr_time`](serve.cfg:global:show_astr_time "wikilink"), в
столбце “Time” отображается астрономическое время получения сообщения.

9\. В столбце “IP” отображается IP-адрес отправителя сообщения, то есть
IP-адрес компьютера, на котором работает браузер, в котором отображаются
страницы, генерируемые CGI-программой `master, judge` или `team`.

10\. В столбце “Size” отображается размер текста сообщения в байтах.

11\. В столбце “From” указывается отправитель сообщения. Отправитель
может быть участником турнира, использующим интерфейс турнира,
поддерживаемый CGI-программой `team`, и в этом случае здесь отображается
имя участника турнира. Если отправителем является привилегированный
пользователь, использующий CGI-программы `judge` или `master`, в столбце
“From” отображается строка `Judges` вне зависимости от конкретного
привилегированного пользователя, отославшего данное сообщение.

12\. В столбце “To” указывается адресат сообщения. Если сообщение
послано судьёй или администратором турнира и адресовано участнику
турнира, то в данном поле отображается имя участника турнира. Если
сообщение послано судьёй или администратором турнира и адресовано всем
участникам турнира, в данном поле отображается строка `All`. Если
сообщение послано участником турнира судьям, то в данном поле
отображается строка Judges. Обычный участник турнира не может послать
сообщение всем участникам турнира или какому-либо конкретному участнику.

13\. В столбце “Subject” указывается тема сообщения. В таблице сообщений
длина строки темы сообщения ограничена 16 символами. Полностью тему
сообщения можно посмотреть при просмотре всего сообщения с помощью
ссылки “View” (14).

14\. С помощью ссылки “View” можно просмотреть полную тему и текст
сообщения и написать на него ответ.
