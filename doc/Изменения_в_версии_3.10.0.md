Навигация: [Главная страница](Main_Page.md)/[Система
ejudge](Система_ejudge.md)/[Разработка](Разработка.md)/[История
версий](История_версий.md)/[Изменения в версии
3.10.0](Изменения_в_версии_3.10.0.md)

Время выхода: 26 декабря 2022 г.

[Предыдущая версия](Изменения_в_версии_3.9.1.md) [Следующая
версия](Изменения_в_версии_3.10.1.md)

[Инсталляция на
Fedora](Инсталляция_ejudge_3.9.2+_на_Fedora_34+_с_нуля.md)

Новые возможности:

- [Аутентификация с помощью
  Yandex](Аутентификация_с_помощью_OAUTH2.md) (в дополнение к
  уже поддерживающимся Google и VK).
- [Поддержка запуска программы на
  сервере](Запуск_на_пользовательских_данных.md) на тестовых
  данных пользователя.
- [Поддержка интеграции с github и
  gitlab](Интеграция_с_github/gitlab.md).
- [Новая модель распределенной компиляции и
  тестирования](Параллельное_тестирование.md).
- [Хранение информации о вариантах задач в
  MySQL](Миграция_в_базу_данных.md).
- [Отказ от использования MongoDB](Миграция_в_базу_данных.md).

### [ejudge.xml](ejudge.xml.md)

Добавлен новые элементы
[`compiler_options`](ejudge.xml:compiler_options.md) и
[`compiler_option`](ejudge.xml:compiler_option.md).

<compiler_options>  
`  `<compiler_option compiler="gcc" option="-std=gnu18" />  
`  `<compiler_option compiler="g++" option="-std=gnu++20" />  
</compiler_options>

Используются для сборки проверяющих программ по "Check contest
settings".

Добавлен новый элемент
[`default_variant_plugin`](ejudge.xml:default_variant_plugin.md).

### [contest.xml](contest.xml.md)

Добавлен атрибут "disable_standalone_reg", который отключает регистрацию
новых пользователей с помощью интерфейса ejudge. Новые пользователи
могут войти и зарегистрироваться только с одного из поддерживаемых
сервисов аутентификации.

### [ej-agent](ej-agent.md)

Новая программа для распределенной компиляции и тестирования. Программа
реализует серверную часть для обмена по новому протоколу взаимодействия
сервера ejudge и серверов тестирования и компиляции.

### [ej-compile](ej-compile.md)

Поддерживается работа с помощью agent.

Улучшено определение версии компиляторов dotnet.

### [ej-contests](ej-contests.md)

Обновлен URL ejudge в copyright notice.

Таблица runs значительно расширена. Структура run_entry в памяти
занимает 256 байт вместо 128 и дополнительно содержит:

- место для хранения sha256 хеша исходного кода вместо sha1;
- идентификатор тестирования в формате UUID (128 бит) вместо 16 бит;
- uuid задачи
- добавлено поле serial_id, которое содержит уникальный 64-битный номер
  посылки. В отличие от run_id это поле уникально для всей таблицы в
  целом.
- флаг is_vcs, который устанавливается в 1 при посылках в систему с
  помощью gitlab/github интеграции.
- поле is_checked для хранения признака того, что посылка проверена.

Для добавления полей в структуру еще зарезервировано 95 байт.

В таблице runs для полей заданы значения по-умолчанию.

Во всех таблицах устранены нулевые даты (0000-00-00 00:00:00). Вместо
этого используется NULL.

judge_uuid используется как идентификатор запроса на компиляцию и
выполнение.

Изменена схема именования пакетов на компиляцию и запуск программ.

Страница "Testing queue" административного интерфейса содержит больше
информации о времени ожидания посылки в очереди.

Поддерживается хранение статуса турнира в базе mysql с помощью плагина
status-mysql.

Поддерживается хранение статуса пользователей в базе mysql с помощью
плагина xuser-mysql.

Поддерживается хранение аватаров пользователей в базе mysql с помощью
плагина avatar-mysql.

Поддерживается хранение информации о вариантах задач в базе mysql с
помощью плагина variant-mysql.

Флаг [`insecure`](serve.cfg:language:insecure.md) языкового
процессора игнорируется при работе в режиме контейнеризации. Все
поддерживаемые языки программирования считаются "безопасными".

Добавлена глобальная конфигурационная переменная
[`variant_plugin`](serve.cfg:global:variant_plugin.md).

При просмотре отчета о тестировании отображается максимальный объем
использованной оперативной памяти (RSS) при работе программы.

Добавлен новый плагин storage-mysql, который позволяет хранить "файлы" в
базе данных mysql. В качестве файлов могут выступать и файлы с исходным
кодом, и файлы с протоколами тестирования.

Добавлен новый плагин submit-mysql для хранения пользовательских посылок
в базе mysql.

Добавлена поддержка [интеграции с gitlab и
github](Интеграция_с_github/gitlab.md).

В XML-лог турнира добавлена информация о времени начала и окончания
работы каждого участника (userrunheaders).

Добавлена конфигурационная переменная задачи
[`enable_user_input`](serve.cfg:problem:enable_user_input.md).

Поддерживается [тестирование пользовательских программ на входных данных
пользователя](Запуск_на_пользовательских_данных.md) (опция
"запустить на сервере").

Добавлена глобальная конфигурационная переменная
[`time_between_submits`](serve.cfg:global:time_between_submits.md).

Добавлена глобальная конфигурационная переменная
[`max_input_size`](serve.cfg:global:max_input_size.md).

Добавлена глобальная конфигурационная переменная
[`max_submit_num`](serve.cfg:global:max_submit_num.md).

Добавлена глобальная конфигурационная переменная
[`max_submit_total`](serve.cfg:global:max_submit_total.md).

Добавлен новый плагин userprob-mysql, который позволяет хранить
информацию для тройки пользователь-турнир-задача.

Поддерживаются http-запросы с телом в формате application/json.

Добавлена конфигурационная переменная задачи
[`enable_vcs`](serve.cfg:problem:enable_vcs.md).

Добавлена конфигурационная переменная задачи
[`post_pull_cmd`](serve.cfg:problem:post_pull_cmd.md).

Добавлена конфигурационная переменная
[`vcs_compile_cmd`](serve.cfg:problem:vcs_compile_cmd.md).

Добавлен плагин vcs_gitlab, поддерживающий интеграцию с gitlab и github.

В запросе submit-run можно указывать язык программирования не только как
его числовой id, а как строку короткого имени (short_name).

В режиме
[`enable_extended_info`](serve.cfg:problem:enable_extended_info.md)
в переменные окружения для проверяющей программы и интерактора
добавляется переменная окружения `EJUDGE_TEST_COUNT`.

Поддерживается режим печати, при котором исходный код посылки копируется
в специальный каталог, из которого он может быть скопирован сторонними
средствами.

Корректно обрабатывается пустая строка в конфигурационных переменных
test_pat.

Поддерживается аутентификация с помощью Yandex OAUTH.

Добавлена глобальная конфигурационная переменная
[`print_just_copy`](serve.cfg:global:print_just_copy.md).

Поддерживается [`logo_url`](contest.xml:logo_url.md) в
отображаемых страницах.

### [ejudge-control](ejudge-control.md)

Добавлены опции --agent, --instance-id, --queue, -v, --mirror, -nhb,
-ht, -hb, -hc.

### [ej-compile-control](ej-compile-control.md)

Добавлены опции --agent, --instance-id, --queue, -v

### [ej-convert-status](ej-convert-status.md)

Новая утилита для конвертации файлов статусов в файловой системе или
записей статусов в mongodb в базу mysql.

### [ej-convert-xuser](ej-convert-xuser.md)

Новая утилита для конвертации файлов статусов пользователей в файловой
системе или записей статусов пользователей в mongodb в базу mysql.

### [ej-convert-variant](ej-convert-variant.md)

Новая утилита для конвертации файлов информации о варианте задач для
пользователей в базу mysql.

### [ej-jobs](ej-jobs.md)

Плагин для telegram поддерживает хранение своего состояния в базе mysql.

Старый файл сокета удаляется при старте программы.

### [ej-super-run](ej-super-run.md)

Ограничение на PID процесса проверяется в соответствии с ограничениями
Linux ([\#101](https://github.com/blackav/ejudge/pull/101)).

При запуске тестируемой программы диспозиция сигнала SIGPIPE
устанавливается по умолчанию
([\#103](https://github.com/blackav/ejudge/pull/103)).

В тестируемые программы не утекает файловый дескриптор устройства
случайных чисел `/dev/urandom`.

Переработана структура struct testinfo_struct. Новая версия структуры
бинарно несовместима с предыдущей. Это потребует перекомпиляции
проверяющих программ, написанных с использованием библиотеки
[libchecker](libchecker.md).

В отчет о тестировании добавлен атрибут max_rss_available, который
устанавливается в значение yes, если отчет о тестировании содержит
информацию об испольновании rss.

В отчет о тестировании добавлен атрибут max_rss, который содержит
максимальный объем ОЗУ (RSS), использованный при выполнении программы.

При запуске программы с пользовательскими данными предварительно может
запускаться программа проверки тестов (test checker). Вывод этой
программы добавляется в элемент test_checker.

При запуске программы оценивания поддерживается опция
[`enable_extended_info`](serve.cfg:problem:enable_extended_info.md).

Исправления в обработке comment-and-ok
([\#115](https://github.com/blackav/ejudge/pull/115)).

При отображении дат используется формат дат ISO (YYYY-MM-DD).

При запуске проверяющей программы в режиме
[`scoring_checker`](serve.cfg:problem:scoring_checker.md)
устанавливается переменная окружения `EJUDGE_MAX_SCORE`
([\#121](https://github.com/blackav/ejudge/pull/121)).

### [ej-super-server](ej-super-server.md)

Из-за перехода на хранение информации о варианте в базе MySQL отключено
редактирование вариантов, назначенных пользователям.

### [ej-suid-container](ej-suid-container.md)

Поддерживается работа в случае, когда подсистема контейнеризации не
поддерживает файл memory.memsw.limit_in_bytes (например, ubuntu).

### [ej-vcs-compile](ej-vcs-compile.md)

Новая утилита для компиляции проекта в режиме интеграции с
github/gitlab.

### [ejudge-execute](ejudge-execute.md)

Поддерживаются ограничения по времени и памяти из .inf-файла.

### [.inf-файлы](.inf-файлы.md)

Добавлено поле `ignore_exit_code`. Если оно установлено, то проверка
кода завершения тестируемой программы не выполняется, то есть программа
считается завершившейся успешно при любом коде завершения. Это не
включает завершение программы из-за фатального сигнала, что по-прежнему
считается ошибкой периода выполнения.

### [tools/logrotate](tools/logrotate.md)

Новая утилита, которая переименовывает лог-файлы

### [libchecker](libchecker.md)

Переработана структура struct testinfo_struct. Новая версия структуры
бинарно несовместима с предыдущей. Это потребует перекомпиляции
проверяющих программ, написанных с использованием библиотеки
[libchecker](libchecker.md).

Добавлены функции `checker_kill_2`, `open_control_fd`.

### Прочее

По умолчанию используется компилятор go из пакета golang, а не gcc-go.

Добавлена поддержка языка swift.

Добавлена поддержка java 18 и 19.
