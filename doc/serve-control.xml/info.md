Навигация: [Главная страница](../main_Page.md)/[Система
ejudge](../система_ejudge.md)/[Использование](../использование.md)/[Конфигурационные
файлы](../конфигурационные_файлы.md)/[serve-control.xml](../serve-control.xml.md)/[Общая
информация](info.md)

Данный конфигурационный файл используется CGI-программой
[`serve-control`](../serve-control.md). Содержимое файла
прочитывается один раз при старте CGI-программы, то есть каждый раз,
когда кто-либо посылает HTTP/HTTPS-запрос к серверу, приводящий к
запуску программы `serve-control`.

Местоположение конфигурационного файла определяется на этапе компиляции
системы `ejudge` с помощью опции `--enable-cgi-conf-dir` скрипта
[`configure`](configure.md). Эта опция позволяет установить
каталог, в котором находятся конфигурационные файлы всех CGI-программ.

Если опция не была указана в командной строке `configure`,
предполагается значение по умолчанию, равное `../cgi-data`.
Местоположение каталога конфигурационных файлов, задаваемого опцией
`--enable-cgi-conf-dir` может быть как абсолютным, так и относительным
путём. В случае относительного пути точкой отсчёта является каталог, в
котором находится сама CGI-программа `serve-control`. Для этого
используется переменная окружения `SCRIPT_FILENAME`, устанавливаемая
веб-сервером при запуске CGI-программы.

Таким образом, если, например, CGI-программы располагаются в каталоге
`/home/httpd/cgi-bin`, то при значении пути к конфигурационным файлам
`../cgi-data`, конфигурационные файлы CGI-программ должны располагаться
в каталоге `/home/httpd/cgi-data`.

Конфигурационный файл программы `serve-control` называется
`serve-control.xml`, но и конфигурационный файл вообще может
отсутствовать. Для этого необходимо, чтобы все настройки, которые
считываются из конфигурационного файла, были установлены при компиляции
системы с помощью опций скрипта [`configure`](configure.md).

Чтобы конфигурационный файл программы `serve-control` был
необязательным, необходимо, чтобы программа `serve-control` была открыта
для доступа со всех IP-адресов (дополнительные ограничения, конечно,
могут задаваться для каждого турнира в конфигурационном файле турнира).
Кроме того, при компиляции системы `ejudge` необходимо указание опций -
`-enable-charset`, `--enable-socket-path`, `--enable-super-serve-socket`
и `--enable-conf-dir`. Тем не менее, рекомендуется создавать этот
конфигурационный файл и устанавливать жёсткие ограничения на разрешенные
IP-адреса для доступа к `serve-control`.

Если конфигурационный файл не найден или не может быть открыт,
используется следующий встроенный конфигурационный файл по умолчанию:

<?xml version="1.0" ?>

<serve_control_config>  
` `<serve_control_access default="allow"/>  
</serve_control_config>

Опции
`--enable-charset, --enable-socket-path, --enable-super-serve- socket` и
`--enable-conf-dir` скрипта [`configure`](configure.md)
позволяют в этом случае установить значения по умолчанию для остальных
необходимых элементов конфигурационного файла.
