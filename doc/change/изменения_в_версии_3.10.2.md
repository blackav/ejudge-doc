Навигация: [Главная страница](main_Page.md)/[Система
ejudge](система_ejudge.md)/[Разработка](разработка.md)/[История
версий](история_версий.md)/[Изменения в версии
3.10.2](изменения_в_версии_3.10.2.md)

Время выхода: 25 марта 2023 г.

[Предыдущая версия](изменения_в_версии_3.10.1.md) [Следующая
версия](изменения_в_версии_3.10.3.md)

Улучшения в импорте задач и турниров из системы Polygon.

Улучшения в образе docker. Контейнер с ejudge ожидает завершения
инициализации контейнера с mariadb.

### [ejudge-control](ejudge-control.md)

Команда stop выполняет остановку компонентов по очереди, дожидаясь
успеха или неудачи при остановке каждого компонента. При неудаче одного
компонента последующие не останавливаются.

Компоненты останавливаются в следующем порядке:
[ej-compile](ej-compile.md),
[ej-super-run](ej-super-run.md),
[ej-super-server](ej-super-server.md),
[ej-contests](ej-contests.md), [ej-jobs](ej-jobs.md),
[ej-users](ej-users.md).

Добавлена опция `--timeout`, ограничивающая тайм-аут при остановке
компонентов.

Добавлена опция `--date-suffix`. Если она указана, то команда `rotate`
использует в качестве суффикса старых лог-файлов текущую дату в формате
YYYYMMDD.

При старте выводится версия всех стартующих компонентов.

Программа взаимодействует только с компонентами ejudge в текущем
пространстве идентификаторов процесса. То есть, например, если ejudge
запущен в докер-контейнере и на хост системе, команда
`ejudge-control stop` остановит ejudge только на хост-системе, не
затрагивая докеризированные процессы.

### [ejudge-edit-users](ejudge-edit-users.md)

Улучшения в поддержке unicode-символов двойной ширины (иероглифы,
смайлики). За основу взят пакет rust
[unicode-width](https://github.com/unicode-rs/unicode-width).

Команда 'o' в списке пользователей турнира копирует ВСЮ информацию
пользователя в другой турнир, то есть регистрирует пользователя в другом
турнире, копирует все флаги регистрации и все поля данных пользователя.

Улучшена поддержка изменения размера экрана.

### [ej-agent](ej-agent.md)

Добавлена опция `--ip`, в аргументе которой можно передать IP-адрес
клиента, использующего ej-agent. Опция не вызывает никаких действий, но
она остается в командной строке, и она видима в списке процессов,
получаемом командой ps.

По умолчанию передаваемые данные сжимаются с помощью gzip, а не lzma.
lzma работает очень медленно.

### [ej-compile](ej-compile.md)

У языка программирования поддерживается флаг
[`enable_custom`](serve.cfg/language/enable_custom.md). Этот
флаг используется в специальном языке программирования `custom`, у
которого нет фиксированного скрипта для компиляции программ на нем, а
который использует скрипт компиляции, заданный в условии задачи в режиме
[специальной компиляции](специальная_компиляция.md).

### [ej-contests](ej-contests.md)

Добавлены конфигурационные параметры задачи
[`custom_compile_cmd`](serve.cfg/problem/custom_compile_cmd.md)
и [`custom_lang_name`](serve.cfg/problem/custom_lang_name.md),
которые используются для задания [специального скрипта
компиляции](специальная_компиляция.md) и имени языка
программирования для задач со специальной компиляцией.

Исправлена ошибка [142](https://github.com/blackav/ejudge/issues/142).

Исправлена ошибка [144](https://github.com/blackav/ejudge/issues/144).

Исправлена ошибка [145](https://github.com/blackav/ejudge/issues/145).

На странице участника турнира ссылка Settings перемещена вправо.

Небольшие изменения в странице участника виртуального турнира: убрана
ссылка Start/Stop Virtual Contest.

На странице участника убрано отображение о количестве участников турнира
online.

При нажатии кнопки "Stop virtual contest" запрашивается подтверждение
см. [71](https://github.com/blackav/ejudge/issues/71).

Исправлена ошибка [51](https://github.com/blackav/ejudge/issues/51):
переименованы столбцы, чтобы при генерации CSV и импорте они имели одни
и те же имена.

В базу данных посылок добавлено поле `verdict_bits`, в котором хранится
множество вердиктов тестирования на тестах для этой посылки. Например,
если при тестировании часть тестов получила вердикт OK, часть тестов
получила вердикт Wrong Answer, а часть тестов — вердикт Time limit
exceeded, поле verdict_bits будет хранить значение

`RUN_OK_BIT | RUN_WRONG_ANSWER_ERR_BIT | RUN_TIME_LIMIT_ERR_BIT`

В выражении фильтра посылок поддерживается поле `verdict_bits` и
символические константы для битов вердикта. Например, в выражении
фильтра можно написать:

`(verdict_bits & RT_BIT) != 0`

Добавлен конфигурационный параметр задачи
[`enable_dynamic_priority`](serve.cfg/problem/enable_dynamic_priority.md).
Если он установлен, то если пользователь отправляет посылки по задаче в
то время, как другие его посылки по этой задаче находятся в состоянии
тестирования, каждая следующая посылка будет иметь пониженный приоритет
тестирования.

Добавлен конфигурационный параметр задачи
[`enable_iframe_statement`](serve.cfg/problem/enable_iframe_statement.md).

Исправлена ошибка [149](https://github.com/blackav/ejudge/issues/149).

Команды отправки посылки на тестирование не требуют обязательного
указания языка программирования в случае задачи со специальной
компиляцией (см.
[`custom_compile_cmd`](serve.cfg/problem/custom_compile_cmd.md)).

Команда [`priv-submit-run`](API:priv:submit-run.md) поддерживает
символическое имя языка программирования.

### [ej-polygon](ej-polygon.md)

Поддерживается загрузка в турнир уже готового архива пакета задачи.

Добавлен режим бинарных тестов. В этом случае у импортированных задач
проставляется флаг
[`binary_input`](serve.cfg/problem/binary_input.md).

Добавлен режим импорта условий задач в IFRAME. В этом случае условие
задачи в формате HTML копируется в каталог задачи в ejudge. Генерируется
условие задачи в файле statement.xml, которое отображает HTML-условие из
polygon внутри тега IFRAME.

Поддерживается работа с polygon с помощью polygon API. В этом случае в
интерфейсе импорта задачи или турнира из polygon потребуется указать не
логин и пароль, а ключ API (API key) и секретное значение API (API
secret).

Добавлена опция `ignore_main_solution`, по которой основное решение не
добавляется в конфигурацию задачи в ejudge, и таким образом команда
"Check contests settings" не будет пытаться его скомпилировать.

### [ej-super-run](ej-super-run.md)

Исправлена некорректная работа в случае, когда запуск интерактора был
неудачен.

Поддерживаются проверяющие программы на testlib, выдающие частичный балл
за тест (см. [96](https://github.com/blackav/ejudge/issues/96)).

IP-адрес хоста, на котором выполняется программа, сохраняется в файл
статуса и отображается на странице очереди тестирования в интерфейсе
администратора турнира.

### [ej-super-server](ej-super-server.md)

При редактировании настроек турнира флаг
[`score_latest`](serve.cfg/problem/score_latest.md) доступен и в
режиме турнира olympiads
[143](https://github.com/blackav/ejudge/issues/143):

### [ej-users](ej-users.md)

Добавлена команда COPY_ALL.

### [gvaluer](gvaluer.md)

Добавлена поддержка `0_if_subset` [MR
\#147](https://github.com/blackav/ejudge/pull/147).

Поддерживается частичный балл за тест (см.
[96](https://github.com/blackav/ejudge/issues/96)).

### Прочее

Системе исполнения dotnet разрешено использование системного вызова
`memfd_create`.

Добавлены эталонные решения тестового турнира на языках kotlin и scala.

Используется библиотека libbacktrace для получения символических трасс
стека в случае падения какого-нибудь компонента.
