Навигация: [Главная страница](../main_Page.md)/[Система
ejudge](../система_ejudge.md)/[Разработка](../разработка.md)/[История
версий](../история_версий.md)/[Изменения в версии
3.7.0](изменения_в_версии_3.7.0.md)

Время выхода: 28 сентября 2017 г.

[Предыдущая версия](изменения_в_версии_3.6.5.md) [Следующая
версия](изменения_в_версии_3.7.1.md)

Добавлена поддержка языка Rust.

### [ejudge.xml](../ejudge.xml.md)

Добавлены элементы
[`default_avatar_plugin`](../ejudge.xml/default_avatar_plugin.md),
[`default_content_plugin`](../ejudge.xml/default_content_plugin.md),
[`default_content_url_prefix`](../ejudge.xml/default_content_url_prefix.md).

### [ej-contests](../tool/ej-contests.md)

Добавлена поддержка [пользовательских
аватаров](../поддержка_аватаров.md). Аватар представляет собой
растровое изображение размера 90x90 в форматах JPEG, GIF или PNG.
Пользователь может загрузить аватар при регистрации на турнир, аватары
пользователей отображаются на различных страницах административного
интерфейса и на странице текущих результатов.

Аватары пользователей хранятся в базе данных mongo, поддержка которой
должна быть активирована. Дополнительно, аватары могут храниться в
файловой системе, чтобы запросы к аватарам обрабатывались веб-сервером
как статический контент.

Добавлена глобальная конфигурационная переменная
[`stand_show_avatar`](../serve.cfg/global/stand_show_avatar.md) для
отображения аватаров участников в таблице результатов.
[screenshot](Media:Master_standings.png.md)

Добавлена поддержка [шаблонов генерации HTML страниц, специфичных для
турниров](../шаблоны_HTML_для_турниров.md). Шаблоны
пользовательских страниц могут произвольным образом модифицироваться для
каждого турнира независимо от других турниров.

В административный интерфейс добавлены команды "Reload contest pages"
для принудительной перезагрузки CSP-страниц текущего турнира и "Reload
All contest pages" для принудительной перезагрузки CSP-страниц всех
турниров.

В конфигурационный файл турнира [contest.xml](../contest.xml.md)
добавлены атрибуты:
[`enable_avatar`](../contest.xml/enable_avatar.md) включает
поддержку аватаров для этого турнира
[`enable_local_pages`](../contest.xml/enable_local_pages.md)
включает поддержку турнирных шаблонов генерации HTML страниц

Добавлены элементы
[`avatar_plugin`](../contest.xml/avatar_plugin.md),
[`content_plugin`](../contest.xml/content_plugin.md),
[`content_url_prefix`](../contest.xml/content_url_prefix.md),
которые позволяют настраивать поддержку аватаров в турнире.

Генерация таблиц результатов турнира полностью переделана: таблицы
результатов для всех типов турниров генерируются одной функций, что
позволило устранить дублирующий код; таблицы результатов генерируются с
помощью CSP-шаблонов; поддерживаются таблицы результатов, специфичные
для турниров; в таблице результатов турниров ACM поддерживается
отображение ячеек участников, сдавших задачу первыми, поддерживается
информация о посылках, сданных в период заморозки турнира.

В таблице текущих результатов турнира поддерживается установка
относительного или абсолютного момента времени, для которого
генерируется таблица результатов, поддерживается переключение таблицы
результатов в пользовательский (непривилегированный) режим.

Генерация таблицы посылок (public log) выполняется с помощью
CSP-шаблона.

Переработана таблица пользователей турнира, отображаемая в интерфейсе
администратора. Поддерживается фильтрация по флагам пользователя.

Обновлен внешний вид страниц регистрации пользователя на турнир. Он
теперь совпадает с общим стилем интерфейса.

В выражении фильтра посылок поддерживаются предикаты userprivileged,
userreg_readonly.

Добавлена поддержка дорешивания виртуального турнира (merge request).

Добавлены флаги "include_testing_report", "run_latex", "print_pdfs",
"clear_working_directory" для генерации tex-протоколов участников.
[screenshot](Media:Protocol_generation_1.png.md)

Улучшена поддержка виртуальных турниров KIROV. Добавлена глобальная
конфигурационная переменная
[`virtual_end_options`](../serve.cfg/global/virtual_end_options.md).

### [ej-page-gen](../tool/ej-page-gen.md)

Добавлена директива @function для определения вспомогательных функций в
CSP-файле.

У элемента s:param атрибут value является необязательным. Добавлен
атрибут checkExpr.

Добавлена поддержка элементов s:td, s:tr.

У элемента s:submit добавлен атрибут text.

У элемента s:v добавлен атрибут fullCheckExpr.

Добавлен элемент s:indir.

У элемента s:textfield добавлен атрибут fullCheckExpr.

У элемента s:checkbox добавлен атрибуты onchange, nameserial,
nameprefix.

У элемента s:img добавлены атрибуты id, class.

### [ej-super-server](../tool/ej-super-server.md)

Добавлена ссылка Logout для выхода из системы.

Обновлен интерфейс страниц редактирования пользователей. Теперь он
соответствует основному интерфейсу системы. Страницы редактирования
пользователей перенесены в CSP-шаблоны.

Страницы загрузки задач и турниров из полигона перенесены в CSP-шаблоны.

### [ej-users](../tool/ej-users.md)

Добавлены новые флаги регистрации на турнир: привилегированный
пользователь (privileged) и запрет на модификацию регистрационных данных
(reg. read-only).

В базу данных пользователей добавлены поля avatar_store, avatar_id,
avatar_suffix.

### [ejudge-edit-users](../tool/ejudge-edit-users.md)

При редактировании списка пользователей команда 'p' переключает флаг
привилегированной регистрации, команда 'h' переключает флаг запрета
модификации регистрационных данных.
