Навигация: [Главная страница](Main_Page "wikilink")/[Система
ejudge](Система_ejudge "wikilink")/[Проверяющие
программы](Проверяющие_программы "wikilink")/[libchecker](libchecker "wikilink")/[Функции](Libchecker:Функции "wikilink")/[Чтение
файла как
текста](Libchecker:Чтение_файла_как_текста "wikilink")/[checker_read_file_by_line_ex](Libchecker:checker_read_file_by_line_ex "wikilink")

Функция `checker_read_file_by_line_ex` — построчное чтение [текстового
файла](текстовый_файл "wikilink") в память.

`void`  
`checker_read_file_by_line_ex(`  
`        FILE *f,`  
`        `[`checker_error_func_t`](libchecker:checker_error_func_t "wikilink")` error_func,`  
`        const char *name,`  
`        char ***out_lines,`  
`        size_t *out_lines_num);`

Функция считывает содержимое текстового файла `f` в память. В
переменную, на которую указывает `out_lines_num`, будет записано число
строк в считанном файле. В переменную, на которую указывает `out_lines`,
будут записаны считанные строки текста. Эта переменная представляет из
себя массив указателей на строки, всего в массиве элементов на 1 больше,
чем строк в файле, и последний элемент массива всегда равен NULL. Каждая
строка завершается нулевым байтом. Никаких других преобразований над
входным файлом не выполняется. Пробелы и символы `\n` в конце текстовых
строк входного файла сохраняются.

Функция не предназначена для работы с бинарными файлами. Если в файле
встречается символ, который недопустим в текстовом файле, вызывается
функция `error_func` для выдачи сообщения об ошибке. Функция должна
завершить выполнение программы. Параметр `name` — это имя файла, которое
используется в тексте сообщения об ошибке.

Память для содержимого файла выделяется на куче с помощью функций
[`xmalloc`](libchecker:xmalloc "wikilink"),
[`xcalloc`](libchecker:xcalloc "wikilink") и
[`xrealloc`](libchecker:xrealloc "wikilink").

Функция не возвращает никакого значения. Если при чтении произошла
ошибка ввода, программа завершается, и диагностируется [внутренняя
ошибка проверки](внутренняя_ошибка_проверки "wikilink"). Для этого
используется функция [`fatal_CF`](libchecker:fatal_CF "wikilink").
