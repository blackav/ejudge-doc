Навигация: [Главная страница](Main_Page.md)/[Система
ejudge](Система_ejudge.md)/[Использование](Использование.md)/[Общая
архитектура
системы](Общая_архитектура_системы.md)/[ejudge-control](ejudge-control.md)

Программа ejudge-control позволяет запустить или остановить систему
ejudge.

- `ejudge-control OPTIONS start [COMPONENT]` — запуск ejudge.
- `ejudge-control OPTIONS stop [COMPONENT]` — остановка ejudge.
- `ejudge-control OPTIONS rotate [COMPONENT]` — Переименование логов
  ejudge.

`COMPONENT` — это название запускаемого или останавливаемого компонента.

|                                           |                                                            |
|-------------------------------------------|------------------------------------------------------------|
| `ej-agent` `agent` `agents`               | [ej-agent](ej-agent.md) (только `stop` и `rotate`) |
| `ej-compile` `compile`                    | [ej-compile](ej-compile.md)                        |
| `ej-contests` `contests` `contest`        | [ej-contests](ej-contests.md)                      |
| `ej-jobs` `jobs` `job`                    | [ej-jobs](ej-jobs.md)                              |
| `ej-super-run` `super-run` `run`          | [ej-super-run](ej-super-run.md)                    |
| `ej-super-server` `super-server` `server` | [ej-super-server](ej-super-server.md)              |
| `ej-users` `users` `user`                 | [ej-users](ej-users.md)                            |
|                                           |                                                            |

Компоненты запускаются в следующем порядке: ej-users, ej-super-server,
ej-compile, ej-super-run, ej-jobs, ej-contests.

Компоненты останавливаются в следующем порядке: ej-compile,
ej-super-run, ej-super-server, ej-contests, ej-jobs, ej-users.

Например, команда

`ejudge-control start`

запускает все компоненты

Команда

`ejudge-control stop contest`

останавливает компонент ej-contests

### ejudge-control start

При запуске ejudge поддерживаются следующие опции:

|                           |                                                                                                                                                                                                                                                                                                      |
|---------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `--agent AGENT`           | Указать спецификацию, каким способом будет выполняться обмен файлами с сервером ejudge. Опция может указываться при запуске ejudge в подчиненном (slave) режиме. В настоящее время поддерживается только обмен файлами по ssh. См. [Параллельное тестирование](Параллельное_тестирование.md) |
| `--date-suffix`           | Используется вместе с командой `rotate`, чтобы ротируемые файлы логов имели суффикс, равный дате выполнения команды rotate, например, 20230512.                                                                                                                                                      |
| `-f`                      | Режим принудительного выполнения операции.                                                                                                                                                                                                                                                           |
| `-g GROUP`                | Задать группу, под которой будет стартовать и работать ejudge. Может использоваться только если команду выполняет пользователь root.                                                                                                                                                                 |
| `-hb`                     | Включить режим отслеживания состояния (heartbeat) компонентов [ej-super-run](ej-super-run.md) и [ej-compile](ej-compile.md). По умолчанию включен.                                                                                                                                   |
| `-hc CMD`                 | Указать команду, которая будет использоваться для завершения работы (down) тестирующего хоста.                                                                                                                                                                                                       |
| `--help`                  | Вывести краткое описание использования и завершить работу.                                                                                                                                                                                                                                           |
| `-ht MIN`                 | Задать тайм-аут, после которого тестирующий хост автоматически завершится. Опция может указываться при запуске ejudge в подчиненном (slave) режиме.                                                                                                                                                  |
| `--instance-id INST-ID`   | Указать идентификатор тестирующего компьютера. Опция может указываться при запуске ejudge в подчиненном режиме.                                                                                                                                                                                      |
| `--ip`                    | Задать IP-адрес. Этот адрес без изменений передаётся в [ej-agent](ej-agent.md) и отображается в командной строке.                                                                                                                                                                            |
| `-m`                      | Чисто серверный (master) режим. Запускаются только компоненты [ej-users](ej-users.md), [ej-contests](ej-contests.md), [ej-super-server](ej-super-server.md), [ej-jobs](ej-jobs.md).                                                                                  |
| `--mirror DIR`            | Указать путь к каталогу, который будет использоваться для кеширования файлов с сервера ejudge. Опция может указываться при запуске ejudge в подчиненном режиме.                                                                                                                                      |
| `-nc`                     | Не запускать компонент [ej-contests](ej-contests.md).                                                                                                                                                                                                                                        |
| `-nhb`                    | Выключить режим отслеживания состояния (heartbeat) компонентов [ej-super-run](ej-super-run.md) и [ej-compile](ej-compile.md).                                                                                                                                                        |
| `-nj`                     | Не запускать компонент [ej-jobs](ej-jobs.md).                                                                                                                                                                                                                                                |
| `-no`                     | Не запускать компонент [ej-compile](ej-compile.md).                                                                                                                                                                                                                                          |
| `-nr`                     | Не запускать компонент [ej-super-run](ej-super-run.md).                                                                                                                                                                                                                                      |
| `-ns`                     | Не запускать компонент [ej-super-server](ej-super-server.md).                                                                                                                                                                                                                                |
| `-nu`                     | Не запускать компонент [ej-users](ej-users.md).                                                                                                                                                                                                                                              |
| `--queue QUEUE-ID`        | Указать идентификатор очереди посылок, из которой будут забираться решения на компиляцию и тестирование. Опция может указываться при запуске ejudge в подчиненном (slave) режиме.                                                                                                                    |
| `-rc`                     | Указать команду, которая будет использоваться для перезагрузки (reboot) тестирующего хоста.                                                                                                                                                                                                          |
| `-s`                      | Подчиненный (slave) режим. Запускается только компонент [ej-compile](ej-compile.md), отвечающий за компиляцию решений, и компонент [ej-super-run](ej-super-run.md), отвечающий за тестирование решений.                                                                              |
| `-u USER`                 | Задать пользователя, под которым будет стартовать и работать ejudge. Может использоваться только если команду выполняет пользователь root.                                                                                                                                                           |
| `--lang-id-map MAP-FILE`  | Задать имя файла, в котором находится отображение идентификаторов языков программирования, переданных в запросах на компиляцию, в сконфигурированные идентификаторы языков программирования компонента [ej-compile](ej-compile.md)                                                           |
| `--local-cache CACHE-DIR` | Задать путь к каталогу, который будет использоваться для кеширования результатов компиляции для быстрой передачи их компоненту [ej-super-run](ej-super-run.md).                                                                                                                              |
| `-v`                      | Подробный (verbose) режим.                                                                                                                                                                                                                                                                           |
| `--version`               | Вывести версию программы и завершить работу.                                                                                                                                                                                                                                                         |

Поддерживаемые опции
