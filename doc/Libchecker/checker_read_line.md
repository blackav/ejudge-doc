Навигация: [Главная страница](Main_Page.md)/[Система
ejudge](Система_ejudge.md)/[Проверяющие
программы](Проверяющие_программы.md)/[libchecker](libchecker.md)/[Функции](Libchecker:Функции.md)/[Чтение
файла как
текста](Libchecker:Чтение_файла_как_текста.md)/[checker_read_line](Libchecker:checker_read_line.md)

Функция `checker_read_line` — чтение одной строки текста из [текстового
файла](текстовый_файл.md).

`int checker_read_line(int ind, const char *name, int eof_error_flag, char **out_str);`

Функция считывает одну строку текста из файла, задаваемого своим
[индексом](libchecker:file_index.md) `ind` в память. Параметр
`name` — это дополнительный пояснительный текст, который будет
выводиться в случае ошибки. В частности, этот текст может задавать
название считываемого из файла параметра (например, `"имя узла графа"`).
Параметр `eof_error_flag` определяет, должна ли диагностироваться ошибка
в случае, если выполняется попытка чтения строки после конца файла. Если
параметр `eof_error_flag` равен 0, то при попытке чтения после конца
файла функция просто вернет значение -1. Если же этот параметр имеет
ненулевое значение, то программа завершится либо с [ошибкой
неправильного формата
результата](ошибка_неправильного_формата_результата.md) при
чтении из файла с индексом 1 (результат работы тестируемой программы),
либо завершится с [внутренней ошибкой
проверки](внутренняя_ошибка_проверки.md) при чтении из файла с
индексами 0 или 2 (входные данные и правильный ответ соответственно).

В переменную, на которую указывает параметр `out_str`, будет записана
считанная строка. Строка дополняется нулевым байтом. Пробельные символы
(включая \n) из конца строки не удаляются. Память для содержимого строки
выделяется на куче с помощью функций
[`xmalloc`](libchecker:xmalloc.md) и
[`xrealloc`](libchecker:xrealloc.md).

Если при чтении произошла ошибка ввода, программа завершается, и
диагностируется [внутренняя ошибка
проверки](внутренняя_ошибка_проверки.md).

Функция возвращает длину считанной строки, либо значение -1, если был
достигнут конец файла, и параметр `eof_error_flag` равен 0.
