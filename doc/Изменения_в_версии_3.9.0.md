Навигация: [Главная страница](Main_Page "wikilink")/[Система
ejudge](Система_ejudge "wikilink")/[Разработка](Разработка "wikilink")/[История
версий](История_версий "wikilink")/[Изменения в версии
3.9.0](Изменения_в_версии_3.9.0 "wikilink")

Время выхода: 27 декабря 2021 г.

[Предыдущая версия](Изменения_в_версии_3.8.0 "wikilink") [Следующая
версия](Изменения_в_версии_3.9.1 "wikilink")

[Инсталляция ejudge на Fedora с
нуля](Инсталляция_ejudge_на_Fedora_с_нуля "wikilink")

[Изоляция недоверенных процессов в
контейнерах](Изоляция_недоверенных_процессов_в_контейнерах "wikilink")

Поддерживается исполнение тестируемых программ в контейнере и компиляция
программ в контейнере.

Это решает несколько проблем предыдущих версий:

- Больше не требуется компиляция и инсталляция модифицированной версии
  ядра Linux.
- Поддерживается безопасное выполнение программ на языках
  программирования, которые ранее были "небезопасными", например, C#.
- Поддерживается безопасная компиляция программ на C/C++ (includebin хак
  не работает).

Для использования этой возможности потребуется несложная настройка
системы ejudge, описанная в [данном
документе](Изоляция_недоверенных_процессов_в_контейнерах "wikilink").

[Аутентификация с помощью
OAUTH2](Аутентификация_с_помощью_OAUTH2 "wikilink")

Поддерживается аутентификация пользователей с помощью протокола OAUTH2.
Поддерживается регистрация пользователей при первом входе по OAUTH2. В
этой версии поддерживается аутентификация с помощью Google и VK. Для
других OAUTH2-провайдеров потребуется написание соответствующего
плагина.

### [ejudge-change-contests](ejudge-change-contests "wikilink")

Эта программа позволяет менять настройки нескольких турниров из
командной строки. Можно открывать доступ к турнирам, закрывать доступ,
добавлять привилегированных пользователей и т. п.

### [ej-suid-container](ej-suid-container "wikilink")

Эта программа реализует запуск других программ в контейнере.

### [ej-suid-update-scripts](ej-suid-update-scripts "wikilink")

Вспомогательная программа для обновления служебных программ,
используемых для запуска программ на java, C#.

### [ejudge.xml](ejudge.xml "wikilink")

Для поддержки безопасного выполнения программ добавился атрибут
`force_container` элемента `config`.

Для поддержки безопасной компиляции программ добавился атрибут
`enable_compile_container` элемента `config`.

Для поддержки аутентификации пользователей по протоколу OAUTH2 добавился
атрибут `enable_oauth` элемента `config`.

### [contest.xml](contest.xml "wikilink")

Добавлены новые атрибуты в элемент `contest`:

- [`read_only_name`](contest.xml:read_only_name "wikilink") — запрет
  редактирования поля `name`
- [`enable_oauth`](contest.xml:enable_oauth "wikilink") — разрешение
  входа в данный турнир по OAUTH2
- [`enable_reminders`](contest.xml:enable_reminders "wikilink") —
  разрешение ежедневных уведомлений о неотвеченных сообщениях,
  неподтвержденных посылках.

Добавлен новый элемент
[`oauth_rules`](contest.xml:oauth_rules "wikilink") элемента `contest`.
Он позволяет управлять доступом пользователей с помощью OAUTH2.

### [.inf-файлы](.inf-файлы "wikilink")

Новые параметры:

- `allow_compile_error` — на данном тесте компиляция должна завершиться
  с ошибкой, вместо сданного текста программы будет подставлена
  специальная заглушка.

<!-- -->

- `max_rss_size` — установить ограничение на RSS (использованный объем
  оперативной памяти) для данного теста.

### [ej-jobs](ej-jobs "wikilink")

Внешний интерфейс программы не изменился, но программа полностью
переписана. Теперь используется UNIX-сокет вместо обмена данными через
файлы.

### [ej-super-run](ej-super-run "wikilink")

Добавлена опция командной строки `-x` которая позволяет задавать
пользователя, под которым будут исполняться тестируемые программы. Опция
необходима, когда в рамках одного сервера работают несколько экземпляров
ej-super-run.

Конфигурационная переменная задачи
[`enable_extended_info`](serve.cfg:problem:enable_extended_info "wikilink")
поддерживается и для проверяющих программ.

### [ej-compile](ej-compile "wikilink")

В режиме компиляции в контейнерах программа ej-compile работает под
обычным пользователем, а не под пользователем ejcompile.

### [ej-contests](ej-contests "wikilink")

Новые конфигурационные переменные языков программирования:

- [`container_options`](serve.cfg:language:container_options "wikilink")
  — позволяет задать дополнительные опции для запуска компилятора
  данного языка в контейнере.

<!-- -->

- [`max_rss_size`](serve.cfg:language:max_rss_size "wikilink") —
  позволяет задать ограничение на максимальный потребленный объем
  оперативной памяти для компилятора.

<!-- -->

- [`run_max_rss_size`](serve.cfg:language:run_max_rss_size "wikilink") —
  позволяет переопределить ограничение на максимальный потребленный
  объем оперативной памяти для всех программ на этом языке
  программирования.

Новые конфигурационные переменные задач:

- [`allow_ip`](serve.cfg:problem:allow_ip "wikilink") — позволяет задать
  ограничение на IP-адреса, с которых возможна сдача задачи.

<!-- -->

- [`checker_max_rss_size`](serve.cfg:problem:checker_max_rss_size "wikilink")
  — задает ограничение на использованный объем оперативной памяти для
  проверяющих программ, интеракторов, программ оценивания.

<!-- -->

- [`checker_max_stack_size`](serve.cfg:problem:checker_max_stack_size "wikilink")
  — задает ограничение на стек для проверяющих программ, интеракторов,
  программ оценивания.

<!-- -->

- [`checker_max_vm_size`](serve.cfg:problem:checker_max_vm_size "wikilink")
  — задает ограничение на размер виртуального адресного пространства для
  проверяющих программ, интеракторов, программ оценивания.

<!-- -->

- [`checker_time_limit_ms`](serve.cfg:problem:checker_time_limit_ms "wikilink")
  — задает ограничение на процессорное время для проверяющих программ и
  программ оценивания.

<!-- -->

- [`container_options`](serve.cfg:problem:container_options "wikilink")
  — позволяет задать дополнительные опции для выполнения в контейнере.

<!-- -->

- [`enable_container`](serve.cfg:problem:enable_container "wikilink") —
  включает выполнение программ в защищенном контейнере.

<!-- -->

- [`enable_control_socket`](serve.cfg:problem:enable_control_socket "wikilink")
  — включает режим управления контейнером через сокет.

<!-- -->

- [`lang_container_options`](serve.cfg:problem:lang_container_options "wikilink")
  — позволяет задать дополнительные опции для выполнения в контейнере в
  зависимости от языка программирования.

<!-- -->

- [`lang_max_rss_size`](serve.cfg:problem:lang_max_rss_size "wikilink")
  — позволяет задать ограничение на максимальный объем потребленной
  оперативной памяти в зависимости от языка программирования.

<!-- -->

- [`max_rss_size`](serve.cfg:problem:max_rss_size "wikilink") —
  позволяет задать ограничение на максимальный объем потребленной
  оперативной памяти.
