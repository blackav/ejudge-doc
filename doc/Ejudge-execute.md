Навигация: [Главная страница](Main_Page "wikilink")/[Система
ejudge](Система_ejudge "wikilink")/[Использование](Использование "wikilink")/[Использование
из командной
строки](Использование_из_командной_строки "wikilink")/[ejudge-execute](ejudge-execute "wikilink")

Программа ejudge-execute позволяет запустить на выполнение программу с
установкой ограничений на время выполнения, виртуальное адресное
пространство и перенаправлением стандартных потоков.

Программа запускается следующим образом:

` ejudge-execute [OPTIONS] PROGRAM [ARGS]`

Здесь `OPTIONS` - опции программы ejudge-execute, `PROGRAM` - программа
для запуска, `ARGS` - аргументы запускаемой программы.

### Опции

Поддерживаются следующие опции программы ejudge-execute.

<table border="1">
<tr>
<td>

`--version`

</td>
<td>

Вывести на стандартный поток вывода версию системы ejudge и завершить
выполнение с кодом завершения 0.

</td>
</tr>
<tr>
<td>

`--help`

</td>
<td>

Вывести на стандартный поток вывода краткую справку о поддерживаемых
опциях и завершить выполнение с кодом завершения 0.

</td>
</tr>
<tr>
<td>

`--stdin=FILE`

</td>
<td>

Перенаправить стандартный поток ввода запускаемой программы на чтение из
указанного файла. Указанный файл должен существовать и быть доступным на
чтение.

</td>
</tr>
<tr>
<td>

`--stdout=FILE`

</td>
<td>

Перенаправить стандартный поток вывода запускаемой программы на запись в
указанный файл. Если указанный файл не существовал, он создается, если
файл существовал, он очищается.

</td>
</tr>
<tr>
<td>

`--stderr=FILE`

</td>
<td>

Перенаправить стандартный поток ошибок запускаемой программы на запись в
указанный файл. Если указанный файл не существовал, он создается, если
файл существовал, он очищается.

</td>
</tr>
<tr>
<td>

`--workdir=DIR`

</td>
<td>

Установить в качестве рабочего каталога запускаемой программы указанный
каталог.

</td>
</tr>
<tr>
<td>

`--test-file=FILE`

</td>
<td>

Задать имя файла с тестовыми данными.

</td>
</tr>
<tr>
<td>

`--corr-file=FILE`

</td>
<td>

Задать имя файла с эталонным ответом.

</td>
</tr>
<tr>
<td>

`--info-file=FILE`

</td>
<td>

Задать имя файла с дополнительной информацией о тестах.

</td>
</tr>
<tr>
<td>

`--input-file=FILE`

</td>
<td>

Имя входного файла (для программ, считывающих входные данные из файла, а
не со стандартного потока ввода).

</td>
</tr>
<tr>
<td>

`--output-file=FILE`

</td>
<td>

Имя выходного файла (для программ, выводящих результат работы в файл, а
не на стандартный поток вывода).

</td>
</tr>
<tr>
<td>

`--clear-env`

</td>
<td>

Очистить окружение для запускаемой программы.

</td>
</tr>
<tr>
<td>

`--env=NAME=VALUE`

</td>
<td>

Установить значение переменной окружения NAME в значение VALUE.

</td>
</tr>
<tr>
<td>

`--time-limit=TL`

</td>
<td>

Установить ограничение процессорного времени для запускаемой программы в
указанное время в секундах.

</td>
</tr>
<tr>
<td>

`--time-limit-millis=TLMS`

</td>
<td>

Установить ограничение процессорного времени для запускаемой программы в
указанное время в миллисекундах (данная опция отменяет действие опции
--time-limit, если заданы обе).

</td>
</tr>
<tr>
<td>

`--real-time-limit=TL`

</td>
<td>

Установить ограничение астрономического времени для запускаемой
программы в указанное время в секундах.

</td>
</tr>
<tr>
<td>

`--no-core-dump`

</td>
<td>

Запретить генерацию дампа памяти программы в случае аварийного
завершения программы.

</td>
</tr>
<tr>
<td>

`--kill-signal=SIG`

</td>
<td>

При принудительном завершении программы из-за истечения отведенного ей
лимита процессорного или астрономического времени посылать программе
сигнал SIG (может быть KILL, TERM или INT).

</td>
</tr>
<tr>
<td>

`--memory-limit`

</td>
<td>

Включить поддержку распознавания ошибки превышения ограничения на размер
виртуального адресного пространства (memory limit exceeded).
Поддерживается только при установленном патче на ядро Linux.

</td>
</tr>
<tr>
<td>

`--secure-exec`

</td>
<td>

Включить режим защищенного выполнения программы. Поддерживается только
при установленном патче на ядро Linux.

</td>
</tr>
<tr>
<td>

`--security-violation`

</td>
<td>

Включить поддержку распознавания запрешенных действий со стороны
запускаемой программы (security violation). Поддерживается только при
установленном патче на ядро Linux.

</td>
</tr>
<tr>
<td>

`--use-stdin`

</td>
<td>
</td>
</tr>
<tr>
<td>

`--use-stdout`

</td>
<td>
</td>
</tr>
<tr>
<td>

`--max-vm-size=SZ`

</td>
<td>

Установить ограничение на максимальный размер виртуального адресного
пространства. При указании размера допускается использование суффиксов
K, M и G, обозначающих килобайты (2<sup>10</sup>), мегабайты
(2<sup>20</sup>) и гигабайты (2<sup>30</sup>) соответственно.

</td>
</tr>
<tr>
<td>

`--max-stack-size=SZ`

</td>
<td>

Установить ограничение на максимальный размер стека процесса. При
указании размера допускается использование суффиксов K, M и G,
обозначающих килобайты (2<sup>10</sup>), мегабайты (2<sup>20</sup>) и
гигабайты (2<sup>30</sup>) соответственно.

</td>
</tr>
<tr>
<td>

`--mode=MODE`

</td>
<td>

Задать права доступа к создаваемым файлам.

</td>
</tr>
<tr>
<td>

`--group=GROUP`

</td>
<td>

Задать группу пользователей создаваемых файлов.

</td>
</tr>
<tr>
<td>

`--test-num=NUM`

</td>
<td>

Задать номер теста.

</td>
</tr>
<tr>
<td>

`--test-pattern=PAT`

</td>
<td>

Задать шаблон для тестовых файлов.

</td>
</tr>
<tr>
<td>

`--corr-pattern=PAT`

</td>
<td>

Задать шаблон для файлов с эталонным ответом.

</td>
</tr>
<tr>
<td>

`--info-pattern=PAT`

</td>
<td>

Задать шаблон для файлов с дополнительной информацией о тестах.

</td>
</tr>
<tr>
<td>

`--update-corr`

</td>
<td>

Сохранить файл с результатом работы программы в качестве файла с
эталонным ответом.

</td>
</tr>
<tr>
<td>

`--test-dir=DIR`

</td>
<td>

Задать имя каталога, содержащего тесты, эталонные ответы и т. д.

</td>
</tr>
<tr>
<td>

`--all-tests`

</td>
<td>

Запустить программу на всех тестах из каталога, задаваемого опцией
--test-dir

</td>
</tr>
<tr>
<td>

`--quiet`

</td>
<td>

Не выводить дополнительную (отладочную) информацию о выполнении
программы.

</td>
</tr>
</table>

### Примеры использования

`ejudge-execute --use-stdin --use-stdout --test-file=003.dat --test-pattern=%03d.dat --corr-pattern=%03d.ans --time-limit=1 --mode=664 --group=olymp ../solution`

Запустить исполняемый файл `../solution` с перенаправлением стандартного
потока ввода и стандартного потока вывода и ограничением времени 1
секунда. Стандартный поток ввода перенаправляется на чтение из копии
файла 003.dat, а после завершения выполнения программы (при условии
успешного завершения) вывод программы на стандартный поток вывода будет
скопирован в файл 003.ans, при этом файл 003.ans получит права доступа
664 (восьмеричные, то есть rw-rw-r--) и группу пользователей olymp.

Такого рода командные строки удобно использовать для генерации эталонных
ответов по тестовым данным с помощью эталонного решения с помощью
следующей команды:

`for i in *.dat`  
`do`  
`  ejudge-execute --use-stdin --use-stdout --test-file=$i --test-pattern=%03d.dat --corr-pattern=%03d.ans --time-limit=1 --mode=664 --group=olymp ../solution`  
`done`

Если у турнира включена альтернативная раскладка файлов, при веб
редактировании тестов поддерживается возможность автоматической
генерации Makefile, в котором будет находиться правило answers для
перегенерации ответов по тестовым данным.

Следующий пример использует файловый ввод-вывод:

`ejudge-execute --input-file=input.txt --output-file=output.txt --test-file=03 --test-pattern=%02d --corr-pattern=%02d.a --time-limit=1 --mode=664 --group=olymp --max-vm-size=256M --max-stack-size=256M ../solution`

Тестовые данные из файла 03 перед выполнением программы будут
скопированы в файл input.txt, а после выполнения программы файл
output.txt будет скопирован в файл 03.a. Кроме того, ограничения на
размер отображенной виртуальной памяти и на размер стека устанавливаются
равными 256 мегабайт.

Следующий пример запустит программу на всех файлах, удовлетворяющих
шаблону %02d, из каталога tests

`ejudge-execute --use-stdin --use-stdout --test-pattern=%02d --time-limit=1 --test-dir=tests --all-tests ./solution`

Следующий пример обновит файлы с эталонным ответом

`ejudge-execute --use-stdin --use-stdout --test-pattern=%02d --corr-pattern=%02d.a --time-limit=1 --test-dir=tests --all-tests --update-corr ./solution`
